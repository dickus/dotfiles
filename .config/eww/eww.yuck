(defwindow main
    :monitor 0
    :geometry
    (
        geometry
        :anchor "top center"
        :y "100"
        :x "150"
    )

    :stacking "bg"
    :focusable "false"

    (timedate)
)

(defvar open_timedate true)
(defvar ANIM_DURATION "500ms")

(defwidget timedate []
    (revealer :transition "slidedown"
              :reveal {open_timedate}
              :duration {ANIM_DURATION}
              (box :class "timedate"
                  :orientation "v"
                  :space-evenly false
                  :halign "end"
                  (mainclock)
                  (date))
    )
)

(defwidget mainclock []
    (label :class "mainclock"
           :text {formattime(EWW_TIME, "%H:%M")})
)

(defpoll date :interval "60s" 
    :initial "loading"
    `date +"%B %d, %Y"`)

(defwidget date []
    (label :class "date"
           :text "${date}")
)

